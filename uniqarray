# typeset -a a=(a b c c d d d e f); o=$(typeset -p a); typeset -A vals; for key in "${!a[@]}"; do vals[${a[key]}]= ${vals[${a[key]}]+command unset -v 'a[key]'}; done; printf 'before: %s\nafter: %s\n' "$o" "$(typeset -p a)"
