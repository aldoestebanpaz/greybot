Attempting to parse HTML with a bash script is grounds for ridicule, derision and scorn. Considder migrating to a language that has libraries for this or take a look at Tidy + XSLT/XPath
